<div class="container">

    <a href="/add" class="btn btn-outline-success w-100">Add</a>

    <form action="/search" method="get" class="d-flex mt-3 mb-3">
        <input type="text" name="tenSP" id="tenSP" placeholder="Tên sản phẩm" class="form-control">
        <button type="submit" class="btn btn-outline-success">Search</button>
    </form>

    <form action="/sapxep" method="get" class=" mb-3">
        <div class="mb-3 form-control d-flex">
            <label for="sapxep" class="form-label">Sắp theo giá</label>
            <select class="form-select" name="sapxep" id="sapxep">
                <option value="0">Bình thường</option>
                <option value="1">Tăng dần</option>
                <option value="-1">Giảm dần</option>
            </select>
            <button type="submit" class="btn btn-outline-success">Lọc</button>
        </div>
       
    </form>

    <table class="table table-hover">
        <thead>
            <th>Mã</th>
            <th>Tên</th>
            <th>Ảnh</th>
            <th>Loại</th>
            <th>Giá</th>
            <th>Chức năng</th>
        </thead>
        <tbody>
            {{#each data}}
            <tr>
                <td>{{this.maSP}}</td>
                <td>{{this.tenSP}}</td>
                <td><img src="{{this.anhSP}}" alt="Đồ ăn" width="60" height="60"></td>
                <td>{{this.loaiSP}}</td>
                <td>{{this.giaSP}}</td>
                <td>
                    <a href="/edit/{{this._id}}" class="btn btn-outline-success">Edit</a>
                    <button class="btn btn-outline-danger" onclick="DeleteItem('{{this._id}}')">Delete</button>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>

</div>

<script>

    function DeleteItem(id) {
        if (confirm("Bạn có muốn xoá ?")) {
            fetch(`/delete/${id}`, { method: "DELETE" }).then(res => location.reload())
                .catch(err => alert("Xoá thất bại"));
        }
    }

</script>